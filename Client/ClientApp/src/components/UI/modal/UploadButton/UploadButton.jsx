import React, {useState} from 'react';
import cl from './UploadButton.module.css'
import Button from '@mui/material/Button';
import { Modal } from '@mui/material';
import Stack from '@mui/material/Stack';
import Content1 from "../../BabylonModule/Content1";
import canvasState from '../../../../store/canvasState';

import { createTheme } from '@mui/material/styles';
import {  Typography, Input, InputLabel, } from '@mui/material';
const UploadButton = () => {
  
    const handleFileChange = (event) => {
		let files = [...event.target.files];
		var reader = new FileReader();
        reader.onload = function(event){
            var img = new Image();
            
            img.onload = function(){
                canvasState.getCanvasList().at(-1).getContext("2d", { willReadFrequently: true }).clearRect(0,0, 1080, 732)
                canvasState.getCanvasList().at(-1).getContext("2d", { willReadFrequently: true }).drawImage(img, 0, 0, 1080, 732)
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(event.target.files[0]);
	};
    function handleImage(e){
        
    }
    return (
        <div>
            <InputLabel className={cl.upload} htmlFor="file-input">
                <p>
                    Добавить
                </p>
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                    <path d="M20.8174 6.40568C20.7322 6.32186 20.6308 6.25533 20.5191 6.20993C20.4074 6.16452 20.2876 6.14115 20.1666 6.14115C20.0456 6.14115 19.9258 6.16452 19.8141 6.20993C19.7024 6.25533 19.601 6.32186 19.5158 6.40568L18.3333 7.56829V2.5691C18.3333 2.33191 18.2367 2.10444 18.0648 1.93673C17.8929 1.76901 17.6597 1.67479 17.4166 1.67479C17.1735 1.67479 16.9403 1.76901 16.7684 1.93673C16.5965 2.10444 16.4999 2.33191 16.4999 2.5691V7.56829L15.3174 6.40568C15.1448 6.23728 14.9107 6.14267 14.6666 6.14267C14.4225 6.14267 14.1884 6.23728 14.0158 6.40568C13.8431 6.57409 13.7462 6.80249 13.7462 7.04064C13.7462 7.2788 13.8431 7.5072 14.0158 7.6756L16.7658 10.3585C16.8529 10.4399 16.9557 10.5038 17.0683 10.5463C17.178 10.5936 17.2966 10.6181 17.4166 10.6181C17.5366 10.6181 17.6552 10.5936 17.7649 10.5463C17.8774 10.5038 17.9802 10.4399 18.0674 10.3585L20.8174 7.6756C20.9033 7.59246 20.9715 7.49355 21.0181 7.38457C21.0646 7.27559 21.0886 7.1587 21.0886 7.04064C21.0886 6.92258 21.0646 6.80569 21.0181 6.69671C20.9715 6.58773 20.9033 6.48882 20.8174 6.40568ZM17.4166 12.4065C17.1735 12.4065 16.9403 12.5007 16.7684 12.6684C16.5965 12.8362 16.4999 13.0636 16.4999 13.3008V13.6406L15.1433 12.3171C14.6642 11.8534 14.0168 11.5932 13.342 11.5932C12.6672 11.5932 12.0198 11.8534 11.5408 12.3171L10.8991 12.9431L8.62575 10.7252C8.14003 10.2741 7.4951 10.0225 6.8245 10.0225C6.1539 10.0225 5.50898 10.2741 5.02325 10.7252L3.66659 12.0488V7.04064C3.66659 6.80346 3.76316 6.57599 3.93507 6.40827C4.10698 6.24056 4.34014 6.14633 4.58325 6.14633H11.9166C12.1597 6.14633 12.3929 6.05211 12.5648 5.8844C12.7367 5.71668 12.8333 5.48921 12.8333 5.25203C12.8333 5.01484 12.7367 4.78737 12.5648 4.61965C12.3929 4.45194 12.1597 4.35772 11.9166 4.35772H4.58325C3.85391 4.35772 3.15443 4.64038 2.63871 5.14353C2.12298 5.64667 1.83325 6.32909 1.83325 7.04064V17.7724C1.83325 18.4839 2.12298 19.1663 2.63871 19.6695C3.15443 20.1726 3.85391 20.4553 4.58325 20.4553H15.5833C16.3126 20.4553 17.0121 20.1726 17.5278 19.6695C18.0435 19.1663 18.3333 18.4839 18.3333 17.7724V13.3008C18.3333 13.0636 18.2367 12.8362 18.0648 12.6684C17.8929 12.5007 17.6597 12.4065 17.4166 12.4065ZM4.58325 18.6667C4.34014 18.6667 4.10698 18.5724 3.93507 18.4047C3.76316 18.237 3.66659 18.0095 3.66659 17.7724V14.5797L6.32492 11.9862C6.45959 11.861 6.63848 11.7911 6.8245 11.7911C7.01053 11.7911 7.18942 11.861 7.32409 11.9862L10.2299 14.8211L14.1716 18.6667H4.58325ZM16.4999 17.7724C16.4986 17.9435 16.4407 18.1098 16.3349 18.2463L12.2008 14.1951L12.8424 13.5691C12.9081 13.5037 12.9866 13.4517 13.0732 13.4162C13.1597 13.3807 13.2527 13.3624 13.3466 13.3624C13.4405 13.3624 13.5334 13.3807 13.62 13.4162C13.7066 13.4517 13.785 13.5037 13.8508 13.5691L16.4999 16.1715V17.7724Z" fill="white"/>
                </svg>
            </InputLabel>
            <Input
                id="file-input"
                type="file"
                hidden
                inputProps={{
                    accept: 'image/*', // Можете указать типы файлов, которые разрешены
                }}
                onChange={handleFileChange}
            />
		</div>
    )


};

export default UploadButton;